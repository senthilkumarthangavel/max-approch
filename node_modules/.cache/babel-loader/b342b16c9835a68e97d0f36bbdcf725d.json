{"ast":null,"code":"\"use strict\";\n\nvar __extends = this && this.__extends || function () {\n  var _extendStatics = function extendStatics(d, b) {\n    _extendStatics = Object.setPrototypeOf || {\n      __proto__: []\n    } instanceof Array && function (d, b) {\n      d.__proto__ = b;\n    } || function (d, b) {\n      for (var p in b) {\n        if (b.hasOwnProperty(p)) d[p] = b[p];\n      }\n    };\n\n    return _extendStatics(d, b);\n  };\n\n  return function (d, b) {\n    _extendStatics(d, b);\n\n    function __() {\n      this.constructor = d;\n    }\n\n    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n  };\n}();\n\nvar __assign = this && this.__assign || function () {\n  __assign = Object.assign || function (t) {\n    for (var s, i = 1, n = arguments.length; i < n; i++) {\n      s = arguments[i];\n\n      for (var p in s) {\n        if (Object.prototype.hasOwnProperty.call(s, p)) t[p] = s[p];\n      }\n    }\n\n    return t;\n  };\n\n  return __assign.apply(this, arguments);\n};\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nrequire(\"mathlive/dist/mathlive.core.css\");\n\nrequire(\"mathlive/dist/mathlive.css\");\n\nvar React = require(\"react\");\n\nvar mathlive_1 = require(\"mathlive\");\n\nfunction combineConfig(props) {\n  var combinedConfiguration = __assign({}, props.mathFieldConfig);\n\n  var onChange = props.onChange;\n\n  if (onChange) {\n    if (props.mathFieldConfig && props.mathFieldConfig.onContentDidChange) {\n      var fromConfig_1 = props.mathFieldConfig.onContentDidChange;\n\n      combinedConfiguration.onContentDidChange = function (mf) {\n        onChange(mf.$latex());\n        fromConfig_1(mf);\n      };\n    } else {\n      combinedConfiguration.onContentDidChange = function (mf) {\n        return onChange(mf.$latex());\n      };\n    }\n  }\n\n  return combinedConfiguration;\n}\n\nexports.combineConfig = combineConfig;\n/** A react-control that hosts a mathlive-mathfield in it. */\n\nvar MathFieldComponent =\n/** @class */\nfunction (_super) {\n  __extends(MathFieldComponent, _super);\n\n  function MathFieldComponent() {\n    var _this = _super !== null && _super.apply(this, arguments) || this;\n\n    _this.insertElement = null;\n    _this.combinedConfiguration = combineConfig(_this.props);\n    return _this;\n  }\n\n  MathFieldComponent.prototype.componentDidUpdate = function (prevProps) {\n    if (!this.mathField) {\n      throw new Error(\"Component was not correctly initialized.\");\n    }\n\n    var p = {\n      prevProps: prevProps,\n      props: this.props\n    };\n\n    if (prevProps.latex !== undefined) {\n      if (this.props.latex === undefined) {\n        throw new Error(\"Cannot change from controlled to uncontrolled state!\");\n      }\n\n      if (this.props.latex !== prevProps.latex) {\n        if (this.props.latex === \"\") {\n          this.mathField.$perform(\"deleteAll\");\n        } else {\n          this.mathField.$latex(this.props.latex, {\n            suppressChangeNotifications: true\n          });\n        }\n      }\n    }\n  };\n\n  MathFieldComponent.prototype.render = function () {\n    var _this = this;\n\n    return React.createElement(\"div\", {\n      ref: function ref(instance) {\n        return _this.insertElement = instance;\n      }\n    });\n  };\n\n  MathFieldComponent.prototype.componentDidMount = function () {\n    var _a;\n\n    if (!this.insertElement) {\n      throw new Error(\"React did apparently not mount the insert point correctly.\");\n    }\n\n    var initialValue = (_a = this.props.initialLatex, _a !== null && _a !== void 0 ? _a : this.props.latex);\n    this.mathField = mathlive_1.makeMathField(this.insertElement, this.combinedConfiguration);\n    this.mathField.$latex(initialValue, {\n      suppressChangeNotifications: true\n    });\n\n    if (this.props.mathFieldRef) {\n      this.props.mathFieldRef(this.mathField);\n    }\n  };\n\n  return MathFieldComponent;\n}(React.Component);\n\nexports.MathFieldComponent = MathFieldComponent;","map":{"version":3,"sources":["../src/MathFieldComponent.tsx"],"names":[],"mappings":"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","sourceRoot":"","sourcesContent":["\"use strict\";\r\nvar __extends = (this && this.__extends) || (function () {\r\n    var extendStatics = function (d, b) {\r\n        extendStatics = Object.setPrototypeOf ||\r\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\r\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\r\n        return extendStatics(d, b);\r\n    };\r\n    return function (d, b) {\r\n        extendStatics(d, b);\r\n        function __() { this.constructor = d; }\r\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\r\n    };\r\n})();\r\nvar __assign = (this && this.__assign) || function () {\r\n    __assign = Object.assign || function(t) {\r\n        for (var s, i = 1, n = arguments.length; i < n; i++) {\r\n            s = arguments[i];\r\n            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p))\r\n                t[p] = s[p];\r\n        }\r\n        return t;\r\n    };\r\n    return __assign.apply(this, arguments);\r\n};\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nrequire(\"mathlive/dist/mathlive.core.css\");\r\nrequire(\"mathlive/dist/mathlive.css\");\r\nvar React = require(\"react\");\r\nvar mathlive_1 = require(\"mathlive\");\r\nfunction combineConfig(props) {\r\n    var combinedConfiguration = __assign({}, props.mathFieldConfig);\r\n    var onChange = props.onChange;\r\n    if (onChange) {\r\n        if (props.mathFieldConfig && props.mathFieldConfig.onContentDidChange) {\r\n            var fromConfig_1 = props.mathFieldConfig.onContentDidChange;\r\n            combinedConfiguration.onContentDidChange = function (mf) {\r\n                onChange(mf.$latex());\r\n                fromConfig_1(mf);\r\n            };\r\n        }\r\n        else {\r\n            combinedConfiguration.onContentDidChange = function (mf) { return onChange(mf.$latex()); };\r\n        }\r\n    }\r\n    return combinedConfiguration;\r\n}\r\nexports.combineConfig = combineConfig;\r\n/** A react-control that hosts a mathlive-mathfield in it. */\r\nvar MathFieldComponent = /** @class */ (function (_super) {\r\n    __extends(MathFieldComponent, _super);\r\n    function MathFieldComponent() {\r\n        var _this = _super !== null && _super.apply(this, arguments) || this;\r\n        _this.insertElement = null;\r\n        _this.combinedConfiguration = combineConfig(_this.props);\r\n        return _this;\r\n    }\r\n    MathFieldComponent.prototype.componentDidUpdate = function (prevProps) {\r\n        if (!this.mathField) {\r\n            throw new Error(\"Component was not correctly initialized.\");\r\n        }\r\n        var p = {\r\n            prevProps: prevProps,\r\n            props: this.props,\r\n        };\r\n        if (prevProps.latex !== undefined) {\r\n            if (this.props.latex === undefined) {\r\n                throw new Error(\"Cannot change from controlled to uncontrolled state!\");\r\n            }\r\n            if (this.props.latex !== prevProps.latex) {\r\n                if (this.props.latex === \"\") {\r\n                    this.mathField.$perform(\"deleteAll\");\r\n                }\r\n                else {\r\n                    this.mathField.$latex(this.props.latex, { suppressChangeNotifications: true });\r\n                }\r\n            }\r\n        }\r\n    };\r\n    MathFieldComponent.prototype.render = function () {\r\n        var _this = this;\r\n        return React.createElement(\"div\", { ref: function (instance) { return _this.insertElement = instance; } });\r\n    };\r\n    MathFieldComponent.prototype.componentDidMount = function () {\r\n        var _a;\r\n        if (!this.insertElement) {\r\n            throw new Error(\"React did apparently not mount the insert point correctly.\");\r\n        }\r\n        var initialValue = (_a = this.props.initialLatex, (_a !== null && _a !== void 0 ? _a : this.props.latex));\r\n        this.mathField = mathlive_1.makeMathField(this.insertElement, this.combinedConfiguration);\r\n        this.mathField.$latex(initialValue, { suppressChangeNotifications: true });\r\n        if (this.props.mathFieldRef) {\r\n            this.props.mathFieldRef(this.mathField);\r\n        }\r\n    };\r\n    return MathFieldComponent;\r\n}(React.Component));\r\nexports.MathFieldComponent = MathFieldComponent;\r\n//# sourceMappingURL=MathFieldComponent.js.map"]},"metadata":{},"sourceType":"script"}